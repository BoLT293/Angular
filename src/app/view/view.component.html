<p-toast position="top-center"></p-toast>
<div class="card m-3" *ngIf="mode=='view'">
    <div class="card-header">
        <h4>Employee Details</h4>
        <button class="btn btn-warning btn-sm float-end" style="margin-top: -34px;" (click)="back()">Back</button>
        <button class="btn btn-info btn-sm float-end "  style="margin-top: -34px; margin-right: 10px;" (click)="editbutton()">Edit</button>

    </div>
    <div class="card-body">
        <form [formGroup]="Addemployee">
            <div class="form-row">
                <div class="form-group">
                    <label>First Name</label>
                    <input type="text" [attr.disabled]="isViewMode? true : null" formControlName="firstname" class="form-control">
                </div>

                <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" [attr.disabled]="isViewMode? true : null" formControlName="lastname" class="form-control">
                </div>

            </div>

            <div class="form-group">
                <label>Email</label>
                <input type="text" [attr.disabled]="isViewMode? true : null" formControlName="email" class="form-control">
            </div>

            <div class="form-group">
                <label>Phone No</label>
                <input type="phone" [attr.disabled]="isViewMode? true : null" formControlName="phoneno" class="form-control">
            </div>

            <div class="form-group">
                <label>Employee id</label>
                <input type="text" [attr.disabled]="isViewMode? true : null" formControlName="login_id" class="form-control">
            </div>

            <div class="form-group">
                <label>Employee Department</label>
                <div>
                    <select class="form-select" style="height: 46px" [attr.disabled]="isViewMode? true : null" formControlName="departmentname">
                        <option value="" disabled selected>--Select Department--</option>
                        <option *ngFor="let department of departmentnames">{{department}}</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <div class="mb-3">
                    <label>Gender</label>
                    <div class="form-check">
                        <input class="form-check-input" [attr.disabled]="isViewMode? true : null" formControlName="gender" type="radio" value="male"><label
                            class="form-check-label">Male</label><br>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" [attr.disabled]="isViewMode? true : null" formControlName="gender" type="radio" value="female"><label
                            class="form-check-label">Female</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="">Select Education Details</label>
                <div *ngFor="let education of education_details; let i = index;">
                    <div class="form-check">
                        <label for="">
                            <input class="form-check-input" type="checkbox" [attr.disabled]="isViewMode? true : null"
                                   name='edu_details' 
                                   [value]="education" 
                                   [checked]="Addemployee.controls.edu_details.value.includes(education)"
                                   (change)="onChange($event)">{{ education }}
                        </label>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>





<div *ngIf="mode=='edit'" class="card m-3">
    <div class="card-header">
        <h4>Edit Employee Details</h4>
        <button class="btn btn-warning btn-sm float-end" style="margin-top: -34px;" (click)="backtoview()">Back</button>

    </div>
    <div class="card-body">
        <form [formGroup]="Addemployee">
            <div class="form-row">
                <div class="form-group">
                    <label>First Name<span class="text-danger">*</span></label>
                    <input type="text" formControlName="firstname" class="form-control">
                    <div *ngIf="firstname?.invalid && firstname?.touched">
                        <small class="text-danger" *ngIf="firstname?.errors?.required">First name is required</small>
                        <small class="text-danger" *ngIf="firstname?.errors?.minlength">First Name should be atleast 3
                            characters</small>
                    </div>
                </div>

                <div class="form-group">
                    <label>Last Name<span class="text-danger">*</span></label>
                    <input type="text" formControlName="lastname" class="form-control">
                    <div *ngIf="lastname?.invalid && lastname?.touched">
                        <small class="text-danger" *ngIf="lastname?.errors?.required">Last Name is required</small>
                        <small class="text-danger" *ngIf="lastname?.errors?.minlength">Last Name should be atleast 3
                            characters</small>

                    </div>
                </div>

            </div>

            <div class="form-group">
                <label>Email<span class="text-danger">*</span></label>
                <input type="text" formControlName="email" class="form-control">
                <div *ngIf="email?.invalid && email?.touched">
                    <small class="text-danger" *ngIf="email?.errors?.required">Email is required</small>
                    <small class="text-danger" *ngIf="email?.errors?.pattern">Invalid Email</small>
                </div>
            </div>

            <div class="form-group">
                <label>Phone No<span class="text-danger">*</span></label>
                <input type="phone" formControlName="phoneno" class="form-control">
                <div *ngIf="phoneno?.invalid && phoneno?.touched">
                    <small class="text-danger" *ngIf="phoneno?.errors?.required">Phone is required</small>
                    <small class="text-danger" *ngIf="phoneno?.errors?.pattern">Invalid Phone Number</small>
                </div>
            </div>

            <div class="form-group">
                <label>Employee id</label>
                <input type="text" formControlName="login_id" class="form-control">
                <div *ngIf="login_id?.invalid && login_id?.touched">
                    <small class="text-danger" *ngIf="login_id?.errors?.required">Login id is required</small>
                </div>
            </div>

            <div class="form-group">
                <label>Employee Department<span class="text-danger">*</span></label>
                <div>
                    <select class="form-select" style="height: 46px" formControlName="departmentname">
                        <option value="" disabled selected>--Select Department--</option>
                        <option *ngFor="let department of departmentnames">{{department}}</option>
                    </select>
                    <div
                        *ngIf="Addemployee.get('departmentname')?.invalid && Addemployee.get('departmentname')?.touched">
                        <small class="text-danger"
                            *ngIf="Addemployee.get('departmentname')?.errors?.required">Department name is
                            required</small>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="mb-3">
                    <label>Gender<span class="text-danger">*</span></label>
                    <div class="form-check">
                        <input class="form-check-input" formControlName="gender" type="radio" value="male"><label
                            class="form-check-label">Male</label><br>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" formControlName="gender" type="radio" value="female"><label
                            class="form-check-label">Female</label>
                    </div>
                    <!-- <div *ngIf="gender?.invalid && gender?.touched">
                        <small class="text-danger" *ngIf="gender?.errors?.required">Please select gender</small>
                    </div> -->
                </div>
            </div>

            <div class="form-group">
                <label for="">Select Education Details<span class="text-danger">*</span></label>
                <div *ngFor="let education of education_details; let i = index;">
                    <div class="form-check">
                        <label for="">
                            <input class="form-check-input" type="checkbox" 
                                   name='edu_details' 
                                   [value]="education" 
                                   [checked]="Addemployee.controls.edu_details.value.includes(education)"
                                   (change)="onChange($event)">{{ education }}
                        </label>
                    </div>
                </div>
            </div>

            

            <div class="form-group">
                <button style="margin-top: 10px;"class="btn btn-success" [disabled]="Addemployee.invalid" (click)="submitdata()">Submit</button>
                <button style="margin-left: 6px;margin-top: 10px;" class="btn btn-danger" (click)="cancel()">Cancel</button>
            </div>
        </form>
    </div>
</div>